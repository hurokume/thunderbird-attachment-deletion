<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Bulk Attachment Deletion — Review</title>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data: blob:; style-src 'self'; script-src 'self';">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="confirm.css" />
</head>

<body>
    <header>
        <h1>Review before deleting</h1>
        <p class="subtitle">Check the targets and breakdown before removing attachments from the selected messages.</p>
    </header>

    <section class="stats">
        <div class="card">
            <div class="label">Messages with attachments</div>
            <div id="affected" class="value">—</div>
        </div>
        <div class="card">
            <div class="label">Total attachments</div>
            <div id="total" class="value">—</div>
        </div>
        <div class="card">
            <div class="label">Total size</div>
            <div id="bytes" class="value">—</div>
        </div>
    </section>

    <section>
        <h2>By extension / size</h2>
        <table id="extTable" class="grid">
            <thead>
                <tr>
                    <th>Extension</th>
                    <th>Count</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="3" class="muted">Loading…</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h2>Messages to process</h2>
        <table id="msgTable" class="grid wide">
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>From</th>
                    <th>Received</th>
                    <th class="num">Attachments</th>
                    <th>Names / Sizes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="5" class="muted">Loading…</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- ===== Templates for safe DOM construction (used by confirm.js) ===== -->
    <template id="ext-row">
        <tr>
            <td class="ext"></td>
            <td class="num count"></td>
            <td class="num bytes"></td>
        </tr>
    </template>

    <template id="msg-row">
        <tr>
            <td class="subject"></td>
            <td class="from"></td>
            <td class="date"></td>
            <td class="num attach-count"></td>
            <td class="names"></td> <!-- previous .attach-list equivalent -->
        </tr>
    </template>

    <template id="empty-row-3">
        <tr>
            <td class="muted" colspan="3">No data</td>
        </tr>
    </template>

    <template id="empty-row-5">
        <tr>
            <td class="muted" colspan="5">No messages with attachments</td>
        </tr>
    </template>
    <!-- ===== End templates ===== -->

    <footer>
        <!-- Banners (kept hidden until used by confirm.js) -->
        <div id="warn" class="warn" hidden></div>
        <div id="error" class="error" hidden></div>

        <div class="buttons">
            <button id="cancel" class="secondary">Cancel</button>
            <button id="ok" class="primary">Delete</button>
        </div>
    </footer>

    <script src="confirm.js"></script>
    <noscript>
        <div class="error" style="margin:12px 20px;">
            This page requires JavaScript. Please check your browser settings.
        </div>
    </noscript>
</body>

</html>